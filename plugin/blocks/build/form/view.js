document.querySelectorAll("form.wpcloud-block-form[data-ajax]").forEach((t=>{const e=t.querySelector('button[type="submit"]');t.addEventListener("submit",(async a=>{a.preventDefault(),e.setAttribute("disabled","disabled"),t.classList.add("is-loading"),t.classList.remove("is-error");const o=Object.fromEntries(new FormData(t).entries());o.action="wpcloud_form_submit";try{const a=await fetch("http://localhost:8888/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()}),r=await a.json();a.ok&&r?.data?.redirect&&(window.location=r.data.redirect),e.removeAttribute("disabled"),t.classList.remove("is-loading"),a.ok||t.classList.add("is-error")}catch(t){(t=>{const e=new URLSearchParams(window.location.search);e.append("wp-form-result","error"),window.location.search=e.toString()})()}}))}));