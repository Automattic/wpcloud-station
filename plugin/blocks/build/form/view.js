(()=>{var o;(o=window.wpcloud).bindFormHandler=e=>{const t=e.querySelector('button[type="submit"]');e.addEventListener("submit",(async r=>{r.preventDefault(),t.setAttribute("disabled","disabled"),e.classList.add("is-loading"),e.classList.remove("is-error");const a=Object.fromEntries(new FormData(e).entries());a.action="wpcloud_form_submit";const d=window.location.search,i=new URLSearchParams(d).get("ref");i&&(a.redirect=i),o.hooks.doAction("wpcloud_form_submit",e);try{const r=await fetch("http://localhost:8888/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a).toString()}),d=await r.json();if(o.hooks.doAction("wpcloud_form_response",d.data,e),r.ok&&d?.data?.redirect){if("reload"===d.data.redirect)return void window.location.reload();window.location=d.data.redirect}t.removeAttribute("disabled"),e.classList.remove("is-loading"),r.ok||e.classList.add("is-error")}catch(o){console.error(o)}}))},document.querySelectorAll("form.wpcloud-block-form[data-ajax]").forEach(o.bindFormHandler)})();