(()=>{var o;(o=window.wpcloud).bindFormHandler=t=>{const e=t.querySelector('button[type="submit"]');t.addEventListener("submit",(async a=>{a.preventDefault(),e.setAttribute("disabled","disabled"),t.classList.add("is-loading"),t.classList.remove("is-error");const r=Object.fromEntries(new FormData(t).entries());r.action="wpcloud_form_submit";const d=window.location.search,i=new URLSearchParams(d).get("ref");i&&(r.redirect=i),o.hooks.doAction("wpcloud_form_submit",t);try{const a=await fetch("http://localhost:8888/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(r).toString()}),d=await a.json();if(o.hooks.doAction("wpcloud_form_response",d.data,t),o.hooks.doAction(`wpcloud_form_response_${d.data.action}`,d.data,t),a.ok&&d?.data?.redirect){if("reload"===d.data.redirect)return void window.location.reload();window.location=d.data.redirect}e.removeAttribute("disabled"),t.classList.remove("is-loading"),a.ok||t.classList.add("is-error")}catch(o){console.error(o)}}))},document.querySelectorAll("form.wpcloud-block-form[data-ajax]").forEach(o.bindFormHandler)})();