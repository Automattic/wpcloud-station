document.querySelectorAll("form.wpcloud-block-form[data-ajax]").forEach((t=>{const e=t.querySelector('button[type="submit"]');t.addEventListener("submit",(async a=>{a.preventDefault(),e.setAttribute("disabled","disabled");const o=Object.fromEntries(new FormData(t).entries());o.action="wpcloud_form_submit";try{const t=await fetch("http://localhost:8888/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(o).toString()}),a=await t.json();t.ok&&a?.data?.redirect&&(window.location=a.data.redirect),e.removeAttribute("disabled")}catch(t){(t=>{const e=new URLSearchParams(window.location.search);e.append("wp-form-result","error"),window.location.search=e.toString()})()}}))}));