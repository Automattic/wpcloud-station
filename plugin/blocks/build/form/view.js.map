{"version":3,"file":"form/view.js","mappings":";;;;;AAAA;AACA;;AAEA,MAAMA,oBAAoB,GAAKC,MAAM,IAAM;EAC1C,MAAMC,SAAS,GAAG,IAAIC,eAAe,CAAEC,MAAM,CAACC,QAAQ,CAACC,MAAO,CAAC;EAC/DJ,SAAS,CAACK,MAAM,CAAE,gBAAgB,EAAEN,MAAO,CAAC;EAC5CG,MAAM,CAACC,QAAQ,CAACC,MAAM,GAAGJ,SAAS,CAACM,QAAQ,CAAC,CAAC;AAC9C,CAAC;AACDC,QAAQ,CAACC,gBAAgB,CAAC,oCAAoC,CAAC,CAACC,OAAO,CAAEC,IAAI,IAAK;EAEjF,MAAMC,MAAM,GAAGD,IAAI,CAACE,aAAa,CAAC,uBAAuB,CAAC;EAE1DF,IAAI,CAACG,gBAAgB,CAAC,QAAQ,EAAE,MAAQC,CAAC,IAAM;IAC9CA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBJ,MAAM,CAACK,YAAY,CAAC,UAAU,EAAE,UAAU,CAAC;IAE3C,MAAMC,QAAQ,GAAGC,MAAM,CAACC,WAAW,CAAC,IAAIC,QAAQ,CAACV,IAAI,CAAC,CAACW,OAAO,CAAC,CAAC,CAAC;IACjEJ,QAAQ,CAACK,MAAM,GAAG,qBAAqB;IAEvC,IAAI;MACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,+CAA+C,EAAE;QAC9EC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACR,cAAc,EAAE;QACjB,CAAC;QACDC,IAAI,EAAE,IAAI1B,eAAe,CAACgB,QAAQ,CAAC,CAACX,QAAQ,CAAC;MAC9C,CAAC,CAAC;MAEF,MAAMsB,MAAM,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MAEpC,IAAIN,QAAQ,CAACO,EAAE,IAAIF,MAAM,EAAEG,IAAI,EAAEC,QAAQ,EAAE;QAC1C9B,MAAM,CAACC,QAAQ,GAAGyB,MAAM,CAACG,IAAI,CAACC,QAAQ;MACvC;MACArB,MAAM,CAACsB,eAAe,CAAC,UAAU,CAAC;IACnC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACfpC,oBAAoB,CAAC,OAAO,CAAC;IAC9B;EACD,CAAE,CAAC;AACJ,CAAE,CAAC,C","sources":["webpack://wp-cloud-dashboard-blocks/./blocks/src/form/view.js"],"sourcesContent":["// eslint-disable-next-line eslint-comments/disable-enable-pair\n/* eslint-disable no-undef */\n\nconst redirectNotification = ( status ) => {\n\tconst urlParams = new URLSearchParams( window.location.search );\n\turlParams.append( 'wp-form-result', status );\n\twindow.location.search = urlParams.toString();\n};\ndocument.querySelectorAll('form.wpcloud-block-form[data-ajax]').forEach((form) => {\n\n\tconst button = form.querySelector('button[type=\"submit\"]');\n\n\tform.addEventListener('submit', async ( e ) => {\n\t\te.preventDefault();\n\t\tbutton.setAttribute('disabled', 'disabled');\n\n\t\tconst formData = Object.fromEntries(new FormData(form).entries());\n\t\tformData.action = 'wpcloud_form_submit';\n\n\t\ttry {\n\t\t\tconst response = await fetch( 'http://localhost:8888/wp-admin/admin-ajax.php', {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t},\n\t\t\t\tbody: new URLSearchParams(formData).toString(),\n\t\t\t});\n\n\t\t\tconst result = await response.json();\n\n\t\t\tif (response.ok && result?.data?.redirect) {\n\t\t\t\twindow.location = result.data.redirect;\n\t\t\t}\n\t\t\tbutton.removeAttribute('disabled');\n\t\t} catch (error) {\n\t\t\tredirectNotification('error');\n\t\t}\n\t} );\n} );"],"names":["redirectNotification","status","urlParams","URLSearchParams","window","location","search","append","toString","document","querySelectorAll","forEach","form","button","querySelector","addEventListener","e","preventDefault","setAttribute","formData","Object","fromEntries","FormData","entries","action","response","fetch","method","headers","body","result","json","ok","data","redirect","removeAttribute","error"],"sourceRoot":""}