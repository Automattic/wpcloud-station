(e=>{const t=document.querySelector(".wpcloud-block-site-alias-list"),o=".wpcloud-block-form-site-alias--make-primary";function i(e){e.onclick=t=>{t.preventDefault();const o=e.closest("form");o.querySelector("input[name=wpcloud_action]").value="site_alias_make_primary",o.dispatchEvent(new Event("submit"))}}function l(e,t){return()=>{e.textContent=t,e.classList.remove("wpcloud-hide"),e.ontransitionend=null}}t.querySelectorAll(o).forEach(i),e.hooks.addAction("wpcloud_form_response_site_alias_remove","site_alias_remove",(function(e,t){e.success?(t.ontransitionend=()=>{t.remove()},t.classList.add("wpcloud-hide")):alert(e.message)})),e.hooks.addAction("wpcloud_alias_added","site_alias_list",(function(l){const a=t.querySelector("form").cloneNode(!0);a.querySelector(".wpcloud-block-site-detail__value").textContent=l,a.querySelector("input[name=site_alias]").value=l,i(a.querySelector(o)),e.bindFormHandler(a),t.appendChild(a),a.style.display="flex"})),e.hooks.addAction("wpcloud_form_response_site_alias_make_primary","site_alias_make_primary",(function(e,o){if(!e.success)return void alert(e.message);o.querySelector("input[name=wpcloud_action]").value="site_alias_remove";const i=t.querySelector(".wpcloud-block-site-alias-list__item--primary").querySelector(".wpcloud-block-site-detail__value"),a=o.querySelector(".wpcloud-block-site-detail__value"),s=i.textContent,n=e.site_alias,c=o.querySelector("input[name=site_alias]");c.value=s,c.name="site_alias",i.ontransitionend=l(i,n),a.ontransitionend=l(a,s),i.classList.add("wpcloud-hide"),a.classList.add("wpcloud-hide")})),e.hooks.addFilter("wpcloud_form_should_submit_site_alias_remove","wpcloud",(()=>!0))})(window.wpcloud);