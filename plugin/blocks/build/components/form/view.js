(()=>{var o;(o=window.wpcloud).bindFormHandler=e=>{const t=e.querySelector('button[type="submit"]');e.addEventListener("submit",(async r=>{r.preventDefault(),t.setAttribute("disabled","disabled"),e.classList.add("is-loading"),e.classList.remove("is-error");const a=Object.fromEntries(new FormData(e).entries());a.action="wpcloud_form_submit";const d=window.location.search,i=new URLSearchParams(d).get("ref");let s;if(i&&(a.redirect=i),s=o.hooks.applyFilters(`wpcloud_form_should_submit_${a.wpcloud_action}`,s,a),void 0===s&&(s=o.hooks.applyFilters("wpcloud_form_should_submit",s,a)),!1===s)return t.removeAttribute("disabled"),void e.classList.remove("is-loading");o.hooks.doAction("wpcloud_form_submit",e);try{const r=await fetch("http://localhost:8888/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(a).toString()}),d=await r.json();if(o.hooks.doAction("wpcloud_form_response",d.data,e),o.hooks.doAction(`wpcloud_form_response_${d.data.action}`,d.data,e),r.ok&&d?.data?.redirect){if("reload"===d.data.redirect)return void window.location.reload();window.location=d.data.redirect}t.removeAttribute("disabled"),e.classList.remove("is-loading"),r.ok||e.classList.add("is-error")}catch(o){console.error(o)}}))},document.querySelectorAll("form.wpcloud-block-form[data-ajax]").forEach(o.bindFormHandler),o.hooks.addFilter("wpcloud_form_should_submit","wpcloud",((o,e)=>void 0!==o?o:e?.wpcloud_action?.match(/delete|remove/)?confirm("Are you sure you want to delete this item?"):void 0),20)})();