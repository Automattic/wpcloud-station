(e=>{const t=document.querySelector(".wpcloud-block-site-alias-list"),a=document.querySelector(".wpcloud-block-site-alias-form-remove"),i=document.querySelectorAll(".wpcloud-block-site-alias-make-primary"),s=document.querySelector(".wpcloud-block-site-alias-form-add input[name=site_alias]");function o(e){e&&e.addEventListener("click",(e=>{e.preventDefault();const t=e.target.closest("form");l(t,"site_alias_make_primary"),t.dispatchEvent(new Event("submit"))}))}function l(e,t){e.querySelector("input[name=wpcloud_action]").value=t}i.forEach(o),e.hooks.addAction("wpcloud_form_response","site_alias_add",((i,c)=>"site_alias_add"===i?.action?function(i){if(!i.success)return void alert(i.message);const l=a.cloneNode(!0);l.querySelector(".wpcloud-block-site-detail__value").textContent=i.site_alias,l.querySelector("input[name=site_alias]").value=i.site_alias,l.dataset.siteAlias=i.site_alias,l.removeAttribute("style"),t.appendChild(l),o(l.querySelector(".wpcloud-block-site-alias-make-primary")),e.bindFormHandler(l),s.value=""}(i):"site_alias_remove"===i?.action?function(e){if(!e.success)return void alert(e.message);const a=t.querySelector(`[data-site-alias="${e.site_alias}"]`);a.ontransitionend=()=>{a.remove()},a.style.opacity=0}(i):"site_alias_make_primary"===i?.action?function(e,a){if(l(a,"site_alias_remove"),!e.success)return void alert(e.message);const i=t.querySelector(".wpcloud-block-site-alias-list__item--primary").querySelector(".wpcloud-block-site-detail__value"),s=a.querySelector(".wpcloud-block-site-detail__value"),o=i.textContent,c=e.site_alias,n=a.querySelector("input[name=site_alias]");n.value=o,n.name="site_alias",[[i,c],[s,o]].forEach((e=>{const[t,a]=e;t.ontransitionend=()=>{t.textContent=a,t.classList.remove("wpcloud-hide"),t.ontransitionend=null}})),i.classList.add("wpcloud-hide"),s.classList.add("wpcloud-hide")}(i,c):void 0))})(window.wpcloud);