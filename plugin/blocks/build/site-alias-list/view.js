(e=>{const t=document.querySelector(".wpcloud-block-site-alias-list"),o=".wpcloud-block-form-site-alias--make-primary";function a(e){e.onclick=t=>{t.preventDefault();const o=e.closest("form");o.querySelector("input[name=wpcloud_action]").value="site_alias_make_primary",o.dispatchEvent(new Event("submit"))}}function i(e,t){return()=>{e.textContent=t,e.classList.remove("wpcloud-hide"),e.ontransitionend=null}}t.querySelectorAll(o).forEach(a),e.hooks.addAction("wpcloud_form_response_site_alias_remove","site_alias_remove",(function(e,t){e.success?(t.ontransitionend=()=>{t.remove()},t.classList.add("wpcloud-hide")):alert(e.message)})),e.hooks.addAction("wpcloud_alias_added","site_alias_list",(function(i){const l=t.querySelector("form").cloneNode(!0),s=document.createElement("a");s.href=`https://${i}`,s.textContent=i,l.querySelector(".wpcloud-block-site-detail__value").appendChild(s),l.querySelector("input[name=site_alias]").value=i,a(l.querySelector(o)),e.bindFormHandler(l),t.appendChild(l),l.style.display="flex"})),e.hooks.addAction("wpcloud_form_response_site_alias_make_primary","site_alias_make_primary",(function(e,o){if(!e.success)return void alert(e.message);o.querySelector("input[name=wpcloud_action]").value="site_alias_remove";const a=t.querySelector(".wpcloud-block-site-alias-list__item--primary").querySelector(".wpcloud-block-site-detail__value"),l=o.querySelector(".wpcloud-block-site-detail__value"),s=a.textContent,n=e.site_alias,c=o.querySelector("input[name=site_alias]");c.value=s,c.name="site_alias",a.ontransitionend=i(a,n),l.ontransitionend=i(l,s),a.classList.add("wpcloud-hide"),l.classList.add("wpcloud-hide")}))})(window.wpcloud);